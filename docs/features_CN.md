# 功能特性

## 📋 核心功能

### 视频操作

- ✅ 格式转换（所有 FFmpeg 支持格式）
- ✅ 分辨率调整（4k/1080p/720p/480p/自定义）
- ✅ 帧率控制
- ✅ 比特率控制
- ✅ 编码器选择
- ✅ 视频裁剪（时间段）
- ✅ 视频拼接（多文件）
- ✅ 视频旋转/翻转
- ✅ 视频滤镜（模糊/锐化/颜色调整等）

### 音频操作

- ✅ 音频提取
- ✅ 音频编码/转码
- ✅ 音频比特率/采样率/通道控制
- ✅ 音量调节
- ✅ 音频混合（多轨道）
- ✅ 音频滤镜（降噪/归一化等）

### 水印系统

- ✅ 图片水印
  - 位置控制（9个预设位置 + 自定义坐标）
  - 透明度调节
  - 缩放比例
- ✅ 文字水印
  - 字体/大小/颜色
  - 位置控制
  - 透明度/边框/阴影

### 截图功能

- ✅ 单张截图（精确时间点）
- ✅ 多张截图（多个时间点）
- ✅ 缩略图生成（均匀分布）

### 流媒体格式

- ✅ HLS (m3u8)
  - 分片时长控制
  - 播放列表管理
  - fMP4 支持
- ✅ DASH (mpd)
  - 分片时长控制
  - 清单管理
  - 直播模式支持

### 元数据处理

- ✅ 读取元数据（时长/分辨率/编码等）
- ✅ 添加/修改元数据
- ✅ 清除元数据
- ✅ 自动旋转处理

## ⚡ 性能优化

### 硬件加速

- ✅ NVIDIA NVENC
- ✅ Intel QSV
- ✅ AMD VCE
- ✅ Apple VideoToolbox
- ✅ 自动检测最佳方案
- ✅ 透明回退到软件编码

### 并发控制

- ✅ 任务队列管理
- ✅ 优先级控制（high/normal/low）
- ✅ 最大并发数配置
- ✅ 任务暂停/恢复/取消

### 智能缓存

- ✅ 参数哈希键
- ✅ TTL 管理
- ✅ LRU 淘汰策略
- ✅ 缓存大小限制

### 下载优化

- ✅ aria2 多线程加速
- ✅ 断点续传
- ✅ 代理支持
- ✅ 进度跟踪

## 🔌 扩展性

### 插件系统

- ✅ 插件安装/卸载
- ✅ 预设注册
- ✅ 自定义处理器
- ✅ 链式方法扩展
- ✅ 构建器方法扩展

### 预设系统

- ✅ 压缩预设（high/medium/low）
- ✅ Web 优化预设
- ✅ 移动设备预设
- ✅ 平台预设（YouTube/TikTok）
- ✅ 流媒体预设（HLS/DASH）
- ✅ 自定义预设

## 🛠️ 开发工具

### CLI 工具

- ✅ convert - 转换视频
- ✅ compress - 压缩视频
- ✅ gif - 创建 GIF
- ✅ extract-audio - 提取音频
- ✅ info - 查看信息
- ✅ detect-hw - 检测硬件加速
- ✅ interactive - 交互模式
- ✅ presets - 列出预设

### 进度报告

- ✅ 百分比进度
- ✅ 预计剩余时间（ETA）
- ✅ 当前帧数
- ✅ 比特率
- ✅ 编码速度（FPS）
- ✅ 文件大小

### 错误处理

- ✅ 错误码系统
- ✅ 友好提示
- ✅ 解决方案建议
- ✅ 重试机制

## 📊 技术规格

### 平台支持

- ✅ Windows (x64)
- ✅ macOS (x64/ARM64)
- ✅ Linux (x64/ARM64)

### 系统要求

- ✅ Node.js >= 18.0.0
- ✅ TypeScript >= 5.0（可选）

### 包体积

- ✅ Core: < 500KB（不含二进制）
- ✅ 完整安装: ~200MB（含 FFmpeg 二进制）

### 测试覆盖

- ✅ 单元测试: 90%+
- ✅ 集成测试: 主要功能
- ✅ E2E 测试: 关键流程

## 🎯 功能对比

| 功能         | ffmpeg-oneclick | fluent-ffmpeg | @ffmpeg/ffmpeg |
| ---------- | --------------- | ------------- | -------------- |
| **核心功能**   |                 |               |                |
| 链式 API     | ✅               | ✅             | ❌              |
| TypeScript | ✅ 原生            | ❌             | ✅              |
| 自动下载       | ✅               | ❌             | ✅              |
| **高级功能**   |                 |               |                |
| 水印系统       | ✅               | ❌             | ❌              |
| HLS/DASH   | ✅               | ❌             | ❌              |
| 音频混合       | ✅               | ❌             | ❌              |
| 截图功能       | ✅ 完整            | ⚠️ 基础         | ❌              |
| **性能**     |                 |               |                |
| 硬件加速       | ✅ 自动检测          | ❌             | ❌              |
| 并发控制       | ✅ 内置            | ❌             | ❌              |
| 智能缓存       | ✅ 内置            | ❌             | ❌              |
| **扩展性**    |                 |               |                |
| 插件系统       | ✅               | ❌             | ❌              |
| 预设系统       | ✅ 丰富            | ⚠️ 基础         | ❌              |
| CLI 工具     | ✅ 完整            | ❌             | ❌              |
